@mixin layout {
  --_layout-gap-v: var(--layout-gap-v, 0px);
  --_layout-gap-h: var(--layout-gap-h, 0px);
  --_layout-gap: var(--_layout-gap-v) var(--_layout-gap-h);
  --_gap: var(--gap, var(--_layout-gap));
  --_wrap: var(--wrap, nowrap);
  --_items-inline: 1;
  --_items-block: 1;
  display: flex;
  flex-wrap: var(--_wrap);
  gap: var(--_gap);
}

@mixin layout-inline {
  @include layout;
  flex-direction: row;
}

@mixin layout-block {
  @include layout;
  flex-direction: column;
}

@mixin layout-inline-item {
  --_item-size-inline: calc((100% - (var(--_items-inline) - 1) * var(--gap-h)) / var(--_items-inline));
  --_item-size: var(--item-size, var(--_item-size-inline));
  width: var(--_item-size);
  min-width: var(--_item-size);
  flex: 0 0 var(--_item-size);
}

@mixin layout-block-item {
  --_item-size-block: calc((100% - (var(--_items-block) - 1) * var(--gap-h)) / var(--_items-block));
  --_item-size: var(--item-size, var(--_item-size-block));
  height: var(--_item-size);
  min-height: var(--_item-size);
  flex: 0 0 var(--_item-size);
}

@mixin layout-stack {
  --_gap: var(--gap, 1em);
  display: flex;
  flex-direction: column;
  > * + * {
    --_item-gap: var(--item-gap, var(--_gap));
    margin-top: var(--_item-gap);
  }
}

@mixin layout-sizing {
  --layout-base-full-width: calc(100vw - 2 * var(--viewport-padding-inline));
  --layout-base-large-width: 1320px;
  --layout-base-medium-width: 800px;
  --layout-base-small-width: 400px;

  --layout-full-max-width: var(--layout-base-full-width);
  --layout-large-max-width: var(--layout-base-large-width);
  --layout-medium-max-width: var(--layout-base-medium-width);
  --layout-small-max-width: var(--layout-base-small-width);

  --layout-full-padding: max(calc((100vw - var(--layout-full-max-width)) / 2), var(--viewport-padding-inline));
  --layout-full-left-edge: var(--layout-full-padding);
  --layout-full-width: calc(100vw - 2 * var(--layout-full-left-edge));
  --layout-full-right-edge: calc(var(--layout-full-left-edge) + var(--layout-full-width));

  --layout-large-padding: max(calc((100vw - var(--layout-large-max-width)) / 2), var(--viewport-padding-inline));
  --layout-large-left-edge: var(--layout-large-padding);
  --layout-large-width: calc(100vw - 2 * var(--layout-large-left-edge));
  --layout-large-right-edge: calc(var(--layout-large-left-edge) + var(--layout-large-width));

  --layout-medium-padding: max(calc((100vw - var(--layout-medium-max-width)) / 2), var(--viewport-padding-inline));
  --layout-medium-left-edge: var(--layout-medium-padding);
  --layout-medium-width: calc(100vw - 2 * var(--layout-medium-left-edge));
  --layout-medium-right-edge: calc(var(--layout-medium-left-edge) + var(--layout-medium-width));

  --layout-small-padding: max(calc((100vw - var(--layout-small-max-width)) / 2), var(--viewport-padding-inline));
  --layout-small-left-edge: var(--layout-small-padding);
  --layout-small-width: calc(100vw - 2 * var(--layout-small-left-edge));
  --layout-small-right-edge: calc(var(--layout-small-left-edge) + var(--layout-small-width));

  --layout-column-unit-float: #{(1/12)};
  --layout-column-unit-percent: calc(var(--layout-column-unit-float) * 100%);
}

@mixin implement-layout {
  :root {
    @include layout-sizing;
  }
  .layout {
    @include layout;
  }

  .layout-inline {
    @include layout-inline;
  }

  .layout-block {
    @include layout-block;
  }

  .layout-inline-item {
    @include layout-inline-item;
  }

  .layout-block-item {
    @include layout-block-item;
  }

  .layout-stack {
    @include layout-stack;
  }
}
